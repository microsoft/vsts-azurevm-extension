$env:INPUT_ConnectedServiceName = "RMDevCert"
$env:INPUT_Action = "Delete"
$env:INPUT_StorageAccountName = "vstsvmextensiontest"
$env:INPUT_ContainerName = "agentextension3"
$env:INPUT_StorageBlobName = "vstsagentextension.zip"
$env:INPUT_ExtensionPackage = "C:\Users\tedeshpa\work\vsts-azurevm-extension\master\vsts-azurevm-extension\_build\ExtensionHandler\Windows\RMExtension.zip"
$env:INPUT_ExtensionDefinitionFile = "C:\Users\tedeshpa\work\vsts-azurevm-extension\master\vsts-azurevm-extension\_build\ExtensionHandler\Windows\ExtensionDefinition_Test.xml"
$env:INPUT_ExtensionName = "TeamServicesAgent"
$env:INPUT_Publisher = "Test3.Microsoft.VisualStudio.Services"
$env:INPUT_Version = "1.0.0.0"
$env:ENDPOINT_URL_RMDevCert  = "https://management.core.windows.net/"
$env:ENDPOINT_DATA_RMDevCert = "{`"subscriptionName`": `"RMDev`", `"subscriptionId`": `"c00d16c7-6c1f-4c03-9be1-6934a4c49682`"}"
$env:ENDPOINT_AUTH_RMDevCert = "{`"parameters`":{`"certificate`":`"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`"},`"scheme`":`"Certificate`"}"


Import-Module .\ps_modules\VstsTaskSdk
Invoke-VstsTaskScript -ScriptBlock ([scriptblock]::Create('. .\VMExtensionInAzurePIR.ps1'))
